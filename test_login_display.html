<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Login Display</title>
    <style>
        body {
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        
        .logout-btn-top {
            position: fixed;
            right: 24px;
            top: 24px;
            padding: 8px 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: transparent;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all .2s ease;
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        
        .logout-btn-top:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .user-bottom-left {
            position: fixed;
            left: 88px;
            bottom: 24px;
            z-index: 9997;
        }
        
        .user-name-display {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: #fff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .theme-toggle-circle {
            position: fixed;
            left: 24px;
            bottom: 24px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 9998;
        }
        
        .status {
            margin: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        button.test-btn {
            margin: 10px;
            padding: 10px 20px;
            background: #4CAF50;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Login UI Test</h1>
    
    <div class="status">
        <h3>Status:</h3>
        <p>Logged in: <span id="loginStatus">Checking...</span></p>
        <p>Email: <span id="emailStatus">Checking...</span></p>
    </div>
    
    <button class="test-btn" onclick="setLogin()">Set Login (dazrini@gmail.com)</button>
    <button class="test-btn" onclick="clearLogin()">Clear Login</button>
    <button class="test-btn" onclick="checkElements()">Check Elements</button>
    
    <!-- Theme circle (visual reference) -->
    <div class="theme-toggle-circle"></div>
    
    <!-- Login UI elements -->
    <button id="logoutBtnTop" class="logout-btn-top" style="display: none;">LOGOUT</button>
    
    <div id="userBottomLeft" class="user-bottom-left" style="display: none;">
        <div id="userNameDisplay" class="user-name-display"></div>
    </div>
    
    <script>
        function setLogin() {
            localStorage.setItem('twin_user_logged_in', 'true');
            localStorage.setItem('twin_user_email', 'dazrini@gmail.com');
            updateStatus();
            initializeLoginUI();
        }
        
        function clearLogin() {
            localStorage.clear();
            updateStatus();
            hideLoginUI();
        }
        
        function hideLoginUI() {
            const userBottomLeft = document.getElementById('userBottomLeft');
            const logoutBtnTop = document.getElementById('logoutBtnTop');
            if (userBottomLeft) userBottomLeft.style.display = 'none';
            if (logoutBtnTop) logoutBtnTop.style.display = 'none';
        }
        
        function updateStatus() {
            document.getElementById('loginStatus').textContent = 
                localStorage.getItem('twin_user_logged_in') || 'false';
            document.getElementById('emailStatus').textContent = 
                localStorage.getItem('twin_user_email') || 'none';
        }
        
        function checkElements() {
            const userBottomLeft = document.getElementById('userBottomLeft');
            const userNameDisplay = document.getElementById('userNameDisplay');
            const logoutBtnTop = document.getElementById('logoutBtnTop');
            
            console.log('userBottomLeft exists:', !!userBottomLeft);
            console.log('userBottomLeft display:', userBottomLeft?.style.display);
            console.log('userNameDisplay exists:', !!userNameDisplay);
            console.log('userNameDisplay text:', userNameDisplay?.textContent);
            console.log('logoutBtnTop exists:', !!logoutBtnTop);
            console.log('logoutBtnTop display:', logoutBtnTop?.style.display);
            
            alert('Check console for details');
        }
        
        function initializeLoginUI() {
            console.log('=== initializeLoginUI called ===');
            const isLoggedIn = localStorage.getItem('twin_user_logged_in') === 'true';
            const userBottomLeft = document.getElementById('userBottomLeft');
            const userNameDisplay = document.getElementById('userNameDisplay');
            const logoutBtnTop = document.getElementById('logoutBtnTop');
            
            console.log('isLoggedIn:', isLoggedIn);
            console.log('userBottomLeft:', userBottomLeft);
            console.log('userNameDisplay:', userNameDisplay);
            console.log('logoutBtnTop:', logoutBtnTop);
            
            if (isLoggedIn && userBottomLeft && userNameDisplay) {
                console.log('Showing login UI elements...');
                const email = localStorage.getItem('twin_user_email') || 'user@example.com';
                const username = email.split('@')[0].toUpperCase();
                console.log('Setting username to:', username);
                
                userBottomLeft.style.display = 'block';
                userNameDisplay.textContent = username;
                console.log('Username element display set to block');
                
                if (logoutBtnTop) {
                    console.log('Setting logout button display to block');
                    logoutBtnTop.style.display = 'block';
                    console.log('Logout button visible');
                }
            } else {
                console.log('Not showing login UI - one of the conditions failed');
            }
        }
        
        // Run on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                updateStatus();
                initializeLoginUI();
            });
        } else {
            updateStatus();
            initializeLoginUI();
        }
    </script>
</body>
</html>
